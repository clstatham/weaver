@startup
system Setup {
    var a = 0
    var b = 0
    loop (a < 100) && (b < 100) {
        a += 1
        b += a

        spawn(Abc {
            a = a
            b = b
            c = a + b
        })
    }
}

impl Abc {
    func all_three() {
        print(self.a, self.b, self.c)
    }
}

@update
system Update {
    loop query [let abc: Abc] {
        abc.all_three()
    }
}
