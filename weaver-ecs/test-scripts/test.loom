component Foo {
    a: int
    b: int
}

component Bar {
    a: int
    b: int
}

@startup
system Setup {
    spawn(Foo {
        a = 0
        b = 1
    })
    spawn(Foo {
        a = 0
        b = 2
    })
    spawn(Foo {
        a = 0
        b = 3
    })
    spawn(Foo {
        a = 0
        b = 4
    })
    spawn(Foo {
        a = 0
        b = 5
    })

    spawn(Bar {
        a = 0
        b = 1
    })
}

@update
system Test {
    query [var bar: Bar] ~ {
        query [let foo: Foo] ~ {
            if bar.a < foo.b {
                bar.a += 1
                print(100)
            } elif bar.a > foo.b {
                bar.a -= 1
                print(200)
            } else {
                bar.a = 0
                print(300)
            }
            print(bar.a)
        }
    }
}
