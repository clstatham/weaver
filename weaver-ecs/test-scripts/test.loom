@startup
system setup {
    create_player(vec3(0, 0, 0), 100)
    create_player(vec3(0, 0, 0), 100)
    spawn(
        Player {
            pos: vec3(10, 10, 10),
            vel: vec3(0, 0, 0),
        },
        Marker {},
    )
}

func create_player(pos: Vec3, hp: Int) -> Entity {
    spawn(
        Player {
            pos: pos,
            vel: vec3(0, 0, 0),
        },
        Health {
            hp: hp,
        },
    )
}

@update
system update {
    let res time: Time
    time.update()
    let dt = time.delta_seconds
    print("dt =", dt)
    let dt = vec3(dt, dt, dt)

    loop query _ [
        var player: Player,
        with[Marker],
    ] {
        player.vel += vec3(0, -9.81, 0) * dt
        player.pos += player.vel * dt
        print("player =", player)
    }
}
